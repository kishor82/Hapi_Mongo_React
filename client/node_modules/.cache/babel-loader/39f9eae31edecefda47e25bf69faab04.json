{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{Button,Row,Col,ListGroup,Image,Card}from'react-bootstrap';import{useSelector,useDispatch}from'react-redux';import Message from'../components/Message';import CheckoutSteps from'../components/CheckoutSteps';import{createOrder}from'../actions/orderActions';var addDecimals=function addDecimals(num){return(Math.round(num*100)/100).toFixed(2);};var PlaceOrderScreen=function PlaceOrderScreen(_ref){var _cart$shippingAddress,_cart$shippingAddress2,_cart$shippingAddress3,_cart$shippingAddress4;var history=_ref.history;var cart=useSelector(function(state){return state.cart;});var dispatch=useDispatch();cart.itemsPrice=addDecimals(cart.cartItems.reduce(function(acc,item){return acc+item.price*item.qty;},0));cart.shippingPrice=addDecimals(cart.itemsPrice>100?0:100);cart.taxPrice=addDecimals(Number((0.15*cart.itemsPrice).toFixed(2)));cart.totalPrice=addDecimals(Number(cart.itemsPrice)+Number(cart.shippingPrice)+Number(cart.taxPrice));var _useSelector=useSelector(function(state){return state.orderCreate;}),order=_useSelector.order,success=_useSelector.success,error=_useSelector.error;useEffect(function(){if(success){history.push(\"/order/\".concat(order._id));}//eslint-disable-next-line\n},[history,success]);var placeOrderHandler=function placeOrderHandler(){dispatch(createOrder({orderItems:cart.cartItems,shippingAddress:cart.shippingAddress,paymentMethod:cart.paymentMethod,itemsPrice:cart.itemsPrice,shippingPrice:cart.shippingPrice,taxPrice:cart.taxPrice,totalPrice:cart.totalPrice}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(CheckoutSteps,{step1:true,step2:true,step3:true,step4:true}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:8},/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Shipping\"),/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(\"strong\",null,\"Address:\"),(_cart$shippingAddress=cart.shippingAddress)===null||_cart$shippingAddress===void 0?void 0:_cart$shippingAddress.address,\",\",(_cart$shippingAddress2=cart.shippingAddress)===null||_cart$shippingAddress2===void 0?void 0:_cart$shippingAddress2.city,\" \",(_cart$shippingAddress3=cart.shippingAddress)===null||_cart$shippingAddress3===void 0?void 0:_cart$shippingAddress3.postalCode,\",\",' ',(_cart$shippingAddress4=cart.shippingAddress)===null||_cart$shippingAddress4===void 0?void 0:_cart$shippingAddress4.country)),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Payment Method\"),/*#__PURE__*/React.createElement(\"strong\",null,\"Method:\"),cart.paymentMethod),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Order Items\"),/*#__PURE__*/React.createElement(\"strong\",null,\"Method:\"),!cart.cartItems.length?/*#__PURE__*/React.createElement(Message,null,\"Your cart is empty\"):/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},cart.cartItems.map(function(item,index){return/*#__PURE__*/React.createElement(ListGroup.Item,{key:index},/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:1},/*#__PURE__*/React.createElement(Image,{src:item.image,alt:item.name,fluid:true,rounded:true})),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Link,{to:\"/product/\".concat(item.product)},item.name)),/*#__PURE__*/React.createElement(Col,{md:4},item.qty,\" x $\",item.price,\" = $\",item.qty*item.price)));}))))),/*#__PURE__*/React.createElement(Col,{md:4},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Order Summary\")),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Items\"),/*#__PURE__*/React.createElement(Col,null,\"$\",cart.itemsPrice))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Shipping\"),/*#__PURE__*/React.createElement(Col,null,\"$\",cart.shippingPrice))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Tax\"),/*#__PURE__*/React.createElement(Col,null,\"$\",cart.taxPrice))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Total\"),/*#__PURE__*/React.createElement(Col,null,\"$\",cart.totalPrice))),error&&/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error)),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Button,{type:\"Button\",className:\"btn-block\",disabled:!cart.cartItems,onClick:placeOrderHandler},\"Place Order\")))))));};export default PlaceOrderScreen;","map":null,"metadata":{},"sourceType":"module"}