{"ast":null,"code":"import _toConsumableArray from\"/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link,useHistory,useParams}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{Row,Col,Image,ListGroup,Card,Button,Form}from'react-bootstrap';import Rating from'../components/Rating';import Message from'../components/Message';import Loader from'../components/Loader';import{listProductDetails,createProductReview}from'../actions/productActions';import swal from'sweetalert';import{PRODUCT_CREATE_REVIEW_RESET}from'../constants/productConstants';import Meta from'../components/Meta';var ProductScreen=function ProductScreen(){var _useParams=useParams(),productId=_useParams.id;var history=useHistory();var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),rating=_useState4[0],setRating=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),comment=_useState6[0],setComment=_useState6[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.productDetails;}),loading=_useSelector.loading,error=_useSelector.error,product=_useSelector.product;var _useSelector2=useSelector(function(state){return state.productReviewCreate;}),errorProductReview=_useSelector2.error,successProductReview=_useSelector2.success;var _useSelector3=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector3.userInfo;useEffect(function(){if(successProductReview){swal('Review submitted!',{icon:'success'});setRating(0);setComment('');}dispatch({type:PRODUCT_CREATE_REVIEW_RESET});dispatch(listProductDetails(productId));},[dispatch,productId,successProductReview]);var addToCartHandler=function addToCartHandler(){history.push(\"/cart/\".concat(productId,\"?qty=\").concat(qty));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(createProductReview(productId,{rating:rating,comment:comment}));};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Link,{className:\"btn btn-light my-3\",to:\"/\"},\"Go Back\"),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Meta,{title:product.name}),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(Image,{src:product===null||product===void 0?void 0:product.image,alt:product===null||product===void 0?void 0:product.name,fluid:true})),/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h3\",null,product===null||product===void 0?void 0:product.name)),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Rating,{value:(product===null||product===void 0?void 0:product.rating)||0,text:\"\".concat(product===null||product===void 0?void 0:product.numReviews,\" reviews\"),color:\"#5aa962\"})),/*#__PURE__*/React.createElement(ListGroup.Item,null,\"Description: \",product===null||product===void 0?void 0:product.description))),/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(Card,null,/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Price:\"),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"strong\",null,\"$ \",product===null||product===void 0?void 0:product.price)))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Status:\"),/*#__PURE__*/React.createElement(Col,null,product&&product.countInStock>0?'In Stock':'Out Of Stock'))),product.countInStock>0&&/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,null,\"Qty\"),/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",value:qty,onChange:function onChange(e){setQty(e.target.value);}},_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/React.createElement(\"option\",{key:x+1,value:x+1},x+1);}))))),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(Button,{onClick:addToCartHandler,className:\"btn-block\",type:\"button\",disabled:(product===null||product===void 0?void 0:product.countInStock)===0},\"Add to Cart\")))))),/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:6},/*#__PURE__*/React.createElement(\"h2\",null,\"Reviews\"),!product.reviews.length&&/*#__PURE__*/React.createElement(Message,null,\"No Reviews\"),/*#__PURE__*/React.createElement(ListGroup,{variant:\"flush\"},product.reviews.map(function(review){return/*#__PURE__*/React.createElement(ListGroup.Item,{key:review._id},/*#__PURE__*/React.createElement(\"strong\",null,review.name),/*#__PURE__*/React.createElement(Rating,{value:review.rating,color:\"#5aa962\"}),/*#__PURE__*/React.createElement(\"p\",null,review.createdAt.substring(0,10)),/*#__PURE__*/React.createElement(\"p\",null,review.comment));}),/*#__PURE__*/React.createElement(ListGroup.Item,null,/*#__PURE__*/React.createElement(\"h2\",null,\"Write a Customer Review\"),errorProductReview&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorProductReview),userInfo?/*#__PURE__*/React.createElement(Form,{onSubmit:submitHandler},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"rating\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Rating\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"select\",value:rating,onChange:function onChange(e){return setRating(e.target.value);}},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Select...\"),/*#__PURE__*/React.createElement(\"option\",{value:\"1\"},\"1 - Poor\"),/*#__PURE__*/React.createElement(\"option\",{value:\"2\"},\"2 - Fair\"),/*#__PURE__*/React.createElement(\"option\",{value:\"3\"},\"3 - Good\"),/*#__PURE__*/React.createElement(\"option\",{value:\"4\"},\"4 - Very Good\"),/*#__PURE__*/React.createElement(\"option\",{value:\"5\"},\"5 - Excellent\"))),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"comment\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Comment\"),/*#__PURE__*/React.createElement(Form.Control,{as:\"textarea\",rows:3,value:comment,onChange:function onChange(e){return setComment(e.target.value);}})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"primary\"},\"Submit\")):/*#__PURE__*/React.createElement(Message,null,\"Please \",/*#__PURE__*/React.createElement(Link,{to:\"/login\"},\"Sign in\"),\" to write a review.\")))))));};export default ProductScreen;","map":null,"metadata":{},"sourceType":"module"}