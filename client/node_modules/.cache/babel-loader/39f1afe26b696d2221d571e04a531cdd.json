{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Col,Row}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useHistory}from'react-router-dom';import swal from'sweetalert';import Message from'../components/Message';import Loader from'../components/Loader';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';var ProductListScreen=function ProductListScreen(){var dispatch=useDispatch();var history=useHistory();var _useSelector=useSelector(function(state){return state.productList;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products;var _useSelector2=useSelector(function(state){return state.productDelete;}),loadingDelete=_useSelector2.loading,errorDelete=_useSelector2.error,successDelete=_useSelector2.success;var _useSelector3=useSelector(function(state){return state.productCreate;}),loadingCreate=_useSelector3.loading,errorCreate=_useSelector3.error,successCreate=_useSelector3.success,createdProduct=_useSelector3.product;var _useSelector4=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector4.userInfo;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts());}},[dispatch,history,userInfo,successDelete,successCreate,createdProduct]);var deleteHandler=function deleteHandler(id){swal({title:'Are you sure?',text:'Once deleted, you will not be able to recover this product!',icon:'warning',buttons:[true,true],dangerMode:true}).then(function(willDelete){if(willDelete){dispatch(deleteProduct(id));swal('Product has been deleted!',{icon:'success'});}});};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Products\")),/*#__PURE__*/React.createElement(Col,{className:\"text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"my-3\",onClick:createProductHandler},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"))),loadingDelete&&/*#__PURE__*/React.createElement(Loader,null),errorDelete&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(Loader,null),errorCreate&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorCreate),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"th\",null,\"PRICE\"),/*#__PURE__*/React.createElement(\"th\",null,\"CATEGORY\"),/*#__PURE__*/React.createElement(\"th\",null,\"BRAND\"))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.name),/*#__PURE__*/React.createElement(\"td\",null,\"$\",product.price),/*#__PURE__*/React.createElement(\"td\",null,product.category),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\")},/*#__PURE__*/React.createElement(Button,{variant:\"light\",className:\"btn-sm\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-edit\"}))),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"}))));}))));};export default ProductListScreen;","map":{"version":3,"sources":["/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/src/screens/ProductListScreen.tsx"],"names":["React","useEffect","LinkContainer","Table","Button","Col","Row","useDispatch","useSelector","useHistory","swal","Message","Loader","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","ProductListScreen","dispatch","history","state","productList","loading","error","products","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","userLogin","userInfo","type","isAdmin","push","_id","deleteHandler","id","title","text","icon","buttons","dangerMode","then","willDelete","createProductHandler","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, { useEffect, FunctionComponent } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { Table, Button, Col, Row } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions';\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants';\n\ninterface Props {}\n\nconst ProductListScreen: FunctionComponent<Props> = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n\n  const { loading, error, products } = useSelector((state: any) => state.productList);\n\n  const { loading: loadingDelete, error: errorDelete, success: successDelete } = useSelector(\n    (state: any) => state.productDelete\n  );\n\n  const { loading: loadingCreate, error: errorCreate, success: successCreate, product: createdProduct } = useSelector(\n    (state: any) => state.productCreate\n  );\n\n  const { userInfo } = useSelector((state: any) => state.userLogin);\n\n  useEffect(() => {\n    dispatch({ type: PRODUCT_CREATE_RESET });\n    if (!userInfo.isAdmin) {\n      history.push('/login');\n    }\n    if (successCreate) {\n      history.push(`/admin/product/${createdProduct._id}/edit`);\n    } else {\n      dispatch(listProducts());\n    }\n  }, [dispatch, history, userInfo, successDelete, successCreate, createdProduct]);\n\n  const deleteHandler = (id: string) => {\n    swal({\n      title: 'Are you sure?',\n      text: 'Once deleted, you will not be able to recover this product!',\n      icon: 'warning',\n      buttons: [true, true],\n      dangerMode: true,\n    }).then((willDelete) => {\n      if (willDelete) {\n        dispatch(deleteProduct(id));\n        swal('Product has been deleted!', {\n          icon: 'success',\n        });\n      }\n    });\n  };\n\n  const createProductHandler = () => {\n    dispatch(createProduct());\n  };\n  return (\n    <>\n      <Row className=\"align-items-center\">\n        <Col>\n          <h1>Products</h1>\n        </Col>\n        <Col className=\"text-right\">\n          <Button className=\"my-3\" onClick={createProductHandler}>\n            <i className=\"fas fa-plus\"></i> Create Product\n          </Button>\n        </Col>\n      </Row>\n      {loadingDelete && <Loader />}\n      {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n      {loadingCreate && <Loader />}\n      {errorCreate && <Message variant=\"danger\">{errorCreate}</Message>}\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <Table striped bordered hover responsive className=\"table-sm\">\n          <thead>\n            <tr>\n              <th>ID</th>\n              <th>NAME</th>\n              <th>PRICE</th>\n              <th>CATEGORY</th>\n              <th>BRAND</th>\n            </tr>\n          </thead>\n          <tbody>\n            {products.map((product: any) => (\n              <tr key={product._id}>\n                <td>{product._id}</td>\n                <td>{product.name}</td>\n                <td>${product.price}</td>\n                <td>{product.category}</td>\n                <td>{product.brand}</td>\n                <td>\n                  <LinkContainer to={`/admin/product/${product._id}/edit`}>\n                    <Button variant=\"light\" className=\"btn-sm\">\n                      <i className=\"fas fa-edit\"></i>\n                    </Button>\n                  </LinkContainer>\n                  <Button variant=\"danger\" className=\"btn-sm\" onClick={() => deleteHandler(product._id)}>\n                    <i className=\"fas fa-trash\"></i>\n                  </Button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </Table>\n      )}\n    </>\n  );\n};\n\nexport default ProductListScreen;\n"]},"metadata":{},"sourceType":"module"}