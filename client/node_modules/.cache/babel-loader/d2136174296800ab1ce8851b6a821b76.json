{"ast":null,"code":"import _slicedToArray from\"/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Form,Button,Row,Col,Table}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{LinkContainer}from'react-router-bootstrap';import Message from'../components/Message';import Loader from'../components/Loader';import{getUserDetails,updateUserProfile}from'../actions/userActions';import{listMyOrders}from'../actions/orderActions';var ProfileScreen=function ProfileScreen(_ref){var history=_ref.history;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(undefined),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(undefined),_useState8=_slicedToArray(_useState7,2),confirmPassword=_useState8[0],setConfirmPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),message=_useState10[0],setMessage=_useState10[1];var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.userDetails;}),loading=_useSelector.loading,user=_useSelector.user,detailError=_useSelector.error;var _useSelector2=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector2.userInfo;var _useSelector3=useSelector(function(state){return state.userUpdateProfile;}),success=_useSelector3.success,profileError=_useSelector3.error;var _useSelector4=useSelector(function(state){return state.orderListMy;}),loadingOrders=_useSelector4.loading,orders=_useSelector4.orders,errorOrders=_useSelector4.error;useEffect(function(){if(!userInfo){history.push('/login');}else{if(!(user===null||user===void 0?void 0:user.name)){dispatch(getUserDetails('profile'));dispatch(listMyOrders());}else{setName(user.name);setEmail(user.email);}}},[dispatch,history,userInfo,user]);var submitHandler=function submitHandler(e){e.preventDefault();if(password!==confirmPassword){setMessage('Passwords do not match');}else{dispatch(updateUserProfile({name:name,email:email,password:password}));}};return/*#__PURE__*/React.createElement(Row,null,/*#__PURE__*/React.createElement(Col,{md:3},/*#__PURE__*/React.createElement(\"h2\",null,\"User Profile\"),detailError&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},detailError),profileError&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},profileError),message&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},message),success&&/*#__PURE__*/React.createElement(Message,{variant:\"success\"},\"Profile Updated\"),loading&&/*#__PURE__*/React.createElement(Loader,null),/*#__PURE__*/React.createElement(Form,{onSubmit:submitHandler},/*#__PURE__*/React.createElement(Form.Group,{controlId:\"name\"},/*#__PURE__*/React.createElement(Form.Label,null,\"name Address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"name\",placeholder:\"Enter name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"email\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Email Address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"email\",placeholder:\"Enter email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"password\"},/*#__PURE__*/React.createElement(Form.Label,null,\"password Address\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Enter password\",onChange:function onChange(e){return setPassword(e.target.value);}})),/*#__PURE__*/React.createElement(Form.Group,{controlId:\"confirmPassword\"},/*#__PURE__*/React.createElement(Form.Label,null,\"Confirm Password\"),/*#__PURE__*/React.createElement(Form.Control,{type:\"password\",placeholder:\"Confirm Password\",onChange:function onChange(e){return setConfirmPassword(e.target.value);}})),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"primary\"},\"Update\"))),/*#__PURE__*/React.createElement(Col,{md:9},/*#__PURE__*/React.createElement(\"h2\",null,\"My Orders\"),loadingOrders?/*#__PURE__*/React.createElement(Loader,null):errorOrders?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorOrders):/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"DATE\"),/*#__PURE__*/React.createElement(\"th\",null,\"TOTAL\"),/*#__PURE__*/React.createElement(\"th\",null,\"PAID\"),/*#__PURE__*/React.createElement(\"th\",null,\"DELIVERED\"),/*#__PURE__*/React.createElement(\"th\",null))),/*#__PURE__*/React.createElement(\"tbody\",null,orders.map(function(order){return/*#__PURE__*/React.createElement(\"tr\",{key:order._id},/*#__PURE__*/React.createElement(\"td\",null,order._id),/*#__PURE__*/React.createElement(\"td\",null,order.createdAt.substring(0,10)),/*#__PURE__*/React.createElement(\"td\",null,order.totalPrice),/*#__PURE__*/React.createElement(\"td\",null,order.isPaid?order.paidAt.substring(0,10):/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-times\",style:{color:'red'}})),/*#__PURE__*/React.createElement(\"td\",null,order.isDeliverd?order.DeliveredAt.substring(0,10):/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-times\",style:{color:'red'}})),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/order/\".concat(order._id)},/*#__PURE__*/React.createElement(Button,{className:\"btn-sm\",variant:\"light\"},\"Details\"))));})))));};export default ProfileScreen;","map":{"version":3,"sources":["/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/src/screens/ProfileScreen.tsx"],"names":["React","useEffect","useState","Form","Button","Row","Col","Table","useDispatch","useSelector","LinkContainer","Message","Loader","getUserDetails","updateUserProfile","listMyOrders","ProfileScreen","history","email","setEmail","undefined","password","setPassword","name","setName","confirmPassword","setConfirmPassword","message","setMessage","dispatch","state","userDetails","loading","user","detailError","error","userLogin","userInfo","userUpdateProfile","success","profileError","orderListMy","loadingOrders","orders","errorOrders","push","submitHandler","e","preventDefault","target","value","map","order","_id","createdAt","substring","totalPrice","isPaid","paidAt","color","isDeliverd","DeliveredAt"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, FunctionComponent } from 'react';\nimport { Form, Button, Row, Col, Table } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { getUserDetails, updateUserProfile } from '../actions/userActions';\nimport { listMyOrders } from '../actions/orderActions';\n\ninterface Props {\n  history: any;\n}\n\nconst ProfileScreen: FunctionComponent<Props> = ({ history }) => {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState(undefined);\n  const [name, setName] = useState('');\n  const [confirmPassword, setConfirmPassword] = useState(undefined);\n  const [message, setMessage] = useState<any>(null);\n\n  const dispatch = useDispatch();\n\n  const { loading, user, error: detailError } = useSelector((state: any) => state.userDetails);\n  const { userInfo } = useSelector((state: any) => state.userLogin);\n  const { success, error: profileError } = useSelector((state: any) => state.userUpdateProfile);\n  const { loading: loadingOrders, orders, error: errorOrders } = useSelector((state: any) => state.orderListMy);\n\n  useEffect(() => {\n    if (!userInfo) {\n      history.push('/login');\n    } else {\n      if (!user?.name) {\n        dispatch(getUserDetails('profile'));\n        dispatch(listMyOrders());\n      } else {\n        setName(user.name);\n        setEmail(user.email);\n      }\n    }\n  }, [dispatch, history, userInfo, user]);\n\n  const submitHandler = (e: React.FormEvent<any>) => {\n    e.preventDefault();\n    if (password !== confirmPassword) {\n      setMessage('Passwords do not match');\n    } else {\n      dispatch(updateUserProfile({ name, email, password }));\n    }\n  };\n\n  return (\n    <Row>\n      <Col md={3}>\n        <h2>User Profile</h2>\n        {detailError && <Message variant=\"danger\">{detailError}</Message>}\n        {profileError && <Message variant=\"danger\">{profileError}</Message>}\n        {message && <Message variant=\"danger\">{message}</Message>}\n        {success && <Message variant=\"success\">Profile Updated</Message>}\n        {loading && <Loader />}\n        <Form onSubmit={submitHandler}>\n          <Form.Group controlId=\"name\">\n            <Form.Label>name Address</Form.Label>\n            <Form.Control\n              type=\"name\"\n              placeholder=\"Enter name\"\n              value={name}\n              onChange={(e: React.ChangeEvent<any>) => setName(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n          <Form.Group controlId=\"email\">\n            <Form.Label>Email Address</Form.Label>\n            <Form.Control\n              type=\"email\"\n              placeholder=\"Enter email\"\n              value={email}\n              onChange={(e: React.ChangeEvent<any>) => setEmail(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"password\">\n            <Form.Label>password Address</Form.Label>\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Enter password\"\n              onChange={(e: React.ChangeEvent<any>) => setPassword(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Form.Group controlId=\"confirmPassword\">\n            <Form.Label>Confirm Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Confirm Password\"\n              onChange={(e: React.ChangeEvent<any>) => setConfirmPassword(e.target.value)}\n            ></Form.Control>\n          </Form.Group>\n\n          <Button type=\"submit\" variant=\"primary\">\n            Update\n          </Button>\n        </Form>\n      </Col>\n      <Col md={9}>\n        <h2>My Orders</h2>\n        {loadingOrders ? (\n          <Loader />\n        ) : errorOrders ? (\n          <Message variant=\"danger\">{errorOrders}</Message>\n        ) : (\n          <Table striped bordered hover responsive className=\"table-sm\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>DATE</th>\n                <th>TOTAL</th>\n                <th>PAID</th>\n                <th>DELIVERED</th>\n                <th></th>\n              </tr>\n            </thead>\n            <tbody>\n              {orders.map((order: any) => (\n                <tr key={order._id}>\n                  <td>{order._id}</td>\n                  <td>{order.createdAt.substring(0, 10)}</td>\n                  <td>{order.totalPrice}</td>\n                  <td>\n                    {order.isPaid ? (\n                      order.paidAt.substring(0, 10)\n                    ) : (\n                      <i className=\"fas fa-times\" style={{ color: 'red' }} />\n                    )}\n                  </td>\n                  <td>\n                    {order.isDeliverd ? (\n                      order.DeliveredAt.substring(0, 10)\n                    ) : (\n                      <i className=\"fas fa-times\" style={{ color: 'red' }} />\n                    )}\n                  </td>\n                  <td>\n                    <LinkContainer to={`/order/${order._id}`}>\n                      <Button className=\"btn-sm\" variant=\"light\">\n                        Details\n                      </Button>\n                    </LinkContainer>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n        )}\n      </Col>\n    </Row>\n  );\n};\n\nexport default ProfileScreen;\n"]},"metadata":{},"sourceType":"module"}