{"ast":null,"code":"var _jsxFileName = \"/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/src/screens/ProductListScreen.tsx\";\nimport React, { useEffect } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { Table, Button, Col, Row } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport Paginate from '../components/Paginate';\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions';\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants';\n\nconst ProductListScreen = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const {\n    pageNumber = 1\n  } = useParams();\n  const {\n    loading,\n    error,\n    products,\n    page,\n    pages\n  } = useSelector(state => state.productList);\n  const {\n    loading: loadingDelete,\n    error: errorDelete,\n    success: successDelete\n  } = useSelector(state => state.productDelete);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    product: createdProduct\n  } = useSelector(state => state.productCreate);\n  const {\n    userInfo\n  } = useSelector(state => state.userLogin);\n  useEffect(() => {\n    dispatch({\n      type: PRODUCT_CREATE_RESET\n    });\n\n    if (!userInfo.isAdmin) {\n      history.push('/login');\n    }\n\n    if (successCreate) {\n      history.push(`/admin/product/${createdProduct._id}/edit`);\n    } else {\n      dispatch(listProducts('', pageNumber));\n    }\n  }, [dispatch, history, userInfo, successDelete, successCreate, createdProduct]);\n\n  const deleteHandler = id => {\n    swal({\n      title: 'Are you sure?',\n      text: 'Once deleted, you will not be able to recover this product!',\n      icon: 'warning',\n      buttons: [true, true],\n      dangerMode: true\n    }).then(willDelete => {\n      if (willDelete) {\n        dispatch(deleteProduct(id));\n      }\n    });\n  };\n\n  const createProductHandler = () => {\n    dispatch(createProduct());\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    className: \"align-items-center\"\n  }, /*#__PURE__*/React.createElement(Col, null, /*#__PURE__*/React.createElement(\"h1\", null, \"Products\")), /*#__PURE__*/React.createElement(Col, {\n    className: \"text-right\"\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"my-3\",\n    onClick: createProductHandler\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-plus\"\n  }), \" Create Product\"))), loadingDelete && /*#__PURE__*/React.createElement(Loader, null), errorDelete && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\"\n  }, errorDelete), loadingCreate && /*#__PURE__*/React.createElement(Loader, null), errorCreate && /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\"\n  }, errorCreate), loading ? /*#__PURE__*/React.createElement(Loader, null) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\"\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    responsive: true,\n    className: \"table-sm\"\n  }, /*#__PURE__*/React.createElement(\"thead\", null, /*#__PURE__*/React.createElement(\"tr\", null, /*#__PURE__*/React.createElement(\"th\", null, \"ID\"), /*#__PURE__*/React.createElement(\"th\", null, \"NAME\"), /*#__PURE__*/React.createElement(\"th\", null, \"PRICE\"), /*#__PURE__*/React.createElement(\"th\", null, \"CATEGORY\"), /*#__PURE__*/React.createElement(\"th\", null, \"BRAND\"))), /*#__PURE__*/React.createElement(\"tbody\", null, products.map(product => /*#__PURE__*/React.createElement(\"tr\", {\n    key: product._id\n  }, /*#__PURE__*/React.createElement(\"td\", null, product._id), /*#__PURE__*/React.createElement(\"td\", null, product.name), /*#__PURE__*/React.createElement(\"td\", null, \"$\", product.price), /*#__PURE__*/React.createElement(\"td\", null, product.category), /*#__PURE__*/React.createElement(\"td\", null, product.brand), /*#__PURE__*/React.createElement(\"td\", null, /*#__PURE__*/React.createElement(LinkContainer, {\n    to: `/admin/product/${product._id}/edit`\n  }, /*#__PURE__*/React.createElement(Button, {\n    variant: \"light\",\n    className: \"btn-sm\"\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-edit\"\n  }))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"danger\",\n    className: \"btn-sm\",\n    onClick: () => deleteHandler(product._id)\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"fas fa-trash\"\n  }))))))), /*#__PURE__*/React.createElement(Paginate, {\n    pages: pages,\n    page: page,\n    isAdmin: true\n  })));\n};\n\nexport default ProductListScreen;","map":{"version":3,"sources":["/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/src/screens/ProductListScreen.tsx"],"names":["React","useEffect","LinkContainer","Table","Button","Col","Row","useDispatch","useSelector","useHistory","useParams","swal","Message","Loader","Paginate","listProducts","deleteProduct","createProduct","PRODUCT_CREATE_RESET","ProductListScreen","dispatch","history","pageNumber","loading","error","products","page","pages","state","productList","loadingDelete","errorDelete","success","successDelete","productDelete","loadingCreate","errorCreate","successCreate","product","createdProduct","productCreate","userInfo","userLogin","type","isAdmin","push","_id","deleteHandler","id","title","text","icon","buttons","dangerMode","then","willDelete","createProductHandler","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, { useEffect, FunctionComponent } from 'react';\nimport { LinkContainer } from 'react-router-bootstrap';\nimport { Table, Button, Col, Row } from 'react-bootstrap';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useHistory, useParams } from 'react-router-dom';\nimport swal from 'sweetalert';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport Paginate from '../components/Paginate';\nimport { listProducts, deleteProduct, createProduct } from '../actions/productActions';\nimport { PRODUCT_CREATE_RESET } from '../constants/productConstants';\n\ninterface Props {}\n\nconst ProductListScreen: FunctionComponent<Props> = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const { pageNumber = 1 } = useParams<any>();\n\n  const { loading, error, products, page, pages } = useSelector((state: any) => state.productList);\n\n  const { loading: loadingDelete, error: errorDelete, success: successDelete } = useSelector(\n    (state: any) => state.productDelete\n  );\n\n  const { loading: loadingCreate, error: errorCreate, success: successCreate, product: createdProduct } = useSelector(\n    (state: any) => state.productCreate\n  );\n\n  const { userInfo } = useSelector((state: any) => state.userLogin);\n\n  useEffect(() => {\n    dispatch({ type: PRODUCT_CREATE_RESET });\n    if (!userInfo.isAdmin) {\n      history.push('/login');\n    }\n    if (successCreate) {\n      history.push(`/admin/product/${createdProduct._id}/edit`);\n    } else {\n      dispatch(listProducts('', pageNumber));\n    }\n  }, [dispatch, history, userInfo, successDelete, successCreate, createdProduct]);\n\n  const deleteHandler = (id: string) => {\n    swal({\n      title: 'Are you sure?',\n      text: 'Once deleted, you will not be able to recover this product!',\n      icon: 'warning',\n      buttons: [true, true],\n      dangerMode: true,\n    }).then((willDelete) => {\n      if (willDelete) {\n        dispatch(deleteProduct(id));\n      }\n    });\n  };\n\n  const createProductHandler = () => {\n    dispatch(createProduct());\n  };\n  return (\n    <>\n      <Row className=\"align-items-center\">\n        <Col>\n          <h1>Products</h1>\n        </Col>\n        <Col className=\"text-right\">\n          <Button className=\"my-3\" onClick={createProductHandler}>\n            <i className=\"fas fa-plus\"></i> Create Product\n          </Button>\n        </Col>\n      </Row>\n      {loadingDelete && <Loader />}\n      {errorDelete && <Message variant=\"danger\">{errorDelete}</Message>}\n      {loadingCreate && <Loader />}\n      {errorCreate && <Message variant=\"danger\">{errorCreate}</Message>}\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <>\n          <Table striped bordered hover responsive className=\"table-sm\">\n            <thead>\n              <tr>\n                <th>ID</th>\n                <th>NAME</th>\n                <th>PRICE</th>\n                <th>CATEGORY</th>\n                <th>BRAND</th>\n              </tr>\n            </thead>\n            <tbody>\n              {products.map((product: any) => (\n                <tr key={product._id}>\n                  <td>{product._id}</td>\n                  <td>{product.name}</td>\n                  <td>${product.price}</td>\n                  <td>{product.category}</td>\n                  <td>{product.brand}</td>\n                  <td>\n                    <LinkContainer to={`/admin/product/${product._id}/edit`}>\n                      <Button variant=\"light\" className=\"btn-sm\">\n                        <i className=\"fas fa-edit\"></i>\n                      </Button>\n                    </LinkContainer>\n                    <Button variant=\"danger\" className=\"btn-sm\" onClick={() => deleteHandler(product._id)}>\n                      <i className=\"fas fa-trash\"></i>\n                    </Button>\n                  </td>\n                </tr>\n              ))}\n            </tbody>\n          </Table>\n          <Paginate pages={pages} page={page} isAdmin={true} />\n        </>\n      )}\n    </>\n  );\n};\n\nexport default ProductListScreen;\n"]},"metadata":{},"sourceType":"module"}