{"ast":null,"code":"import React,{useEffect}from'react';import{LinkContainer}from'react-router-bootstrap';import{Table,Button,Col,Row}from'react-bootstrap';import{useDispatch,useSelector}from'react-redux';import{useHistory,useParams}from'react-router-dom';import swal from'sweetalert';import Message from'../components/Message';import Loader from'../components/Loader';import Paginate from'../components/Paginate';import{listProducts,deleteProduct,createProduct}from'../actions/productActions';import{PRODUCT_CREATE_RESET}from'../constants/productConstants';var ProductListScreen=function ProductListScreen(){var dispatch=useDispatch();var history=useHistory();var _useParams=useParams(),_useParams$pageNumber=_useParams.pageNumber,pageNumber=_useParams$pageNumber===void 0?1:_useParams$pageNumber;var _useSelector=useSelector(function(state){return state.productList;}),loading=_useSelector.loading,error=_useSelector.error,products=_useSelector.products,page=_useSelector.page,pages=_useSelector.pages;var _useSelector2=useSelector(function(state){return state.productDelete;}),loadingDelete=_useSelector2.loading,errorDelete=_useSelector2.error,successDelete=_useSelector2.success;var _useSelector3=useSelector(function(state){return state.productCreate;}),loadingCreate=_useSelector3.loading,errorCreate=_useSelector3.error,successCreate=_useSelector3.success,createdProduct=_useSelector3.product;var _useSelector4=useSelector(function(state){return state.userLogin;}),userInfo=_useSelector4.userInfo;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts('',pageNumber));}},[dispatch,history,userInfo,successDelete,successCreate,createdProduct,pageNumber]);var deleteHandler=function deleteHandler(id){swal({title:'Are you sure?',text:'Once deleted, you will not be able to recover this product!',icon:'warning',buttons:[true,true],dangerMode:true}).then(function(willDelete){if(willDelete){dispatch(deleteProduct(id));}});};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Row,{className:\"align-items-center\"},/*#__PURE__*/React.createElement(Col,null,/*#__PURE__*/React.createElement(\"h1\",null,\"Products\")),/*#__PURE__*/React.createElement(Col,{className:\"text-right\"},/*#__PURE__*/React.createElement(Button,{className:\"my-3\",onClick:createProductHandler},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-plus\"}),\" Create Product\"))),loadingDelete&&/*#__PURE__*/React.createElement(Loader,null),errorDelete&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorDelete),loadingCreate&&/*#__PURE__*/React.createElement(Loader,null),errorCreate&&/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},errorCreate),loading?/*#__PURE__*/React.createElement(Loader,null):error?/*#__PURE__*/React.createElement(Message,{variant:\"danger\"},error):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Table,{striped:true,bordered:true,hover:true,responsive:true,className:\"table-sm\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"ID\"),/*#__PURE__*/React.createElement(\"th\",null,\"NAME\"),/*#__PURE__*/React.createElement(\"th\",null,\"PRICE\"),/*#__PURE__*/React.createElement(\"th\",null,\"CATEGORY\"),/*#__PURE__*/React.createElement(\"th\",null,\"BRAND\"))),/*#__PURE__*/React.createElement(\"tbody\",null,products.map(function(product){return/*#__PURE__*/React.createElement(\"tr\",{key:product._id},/*#__PURE__*/React.createElement(\"td\",null,product._id),/*#__PURE__*/React.createElement(\"td\",null,product.name),/*#__PURE__*/React.createElement(\"td\",null,\"$\",product.price),/*#__PURE__*/React.createElement(\"td\",null,product.category),/*#__PURE__*/React.createElement(\"td\",null,product.brand),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(LinkContainer,{to:\"/admin/product/\".concat(product._id,\"/edit\")},/*#__PURE__*/React.createElement(Button,{variant:\"light\",className:\"btn-sm\"},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-edit\"}))),/*#__PURE__*/React.createElement(Button,{variant:\"danger\",className:\"btn-sm\",onClick:function onClick(){return deleteHandler(product._id);}},/*#__PURE__*/React.createElement(\"i\",{className:\"fas fa-trash\"}))));}))),/*#__PURE__*/React.createElement(Paginate,{pages:pages,page:page,isAdmin:true})));};export default ProductListScreen;","map":null,"metadata":{},"sourceType":"module"}