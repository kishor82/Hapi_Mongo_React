{"ast":null,"code":"var _jsxFileName = \"/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/src/screens/ProductScreen.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Row, Col, Image, ListGroup, Card, Button, Form } from 'react-bootstrap';\nimport Rating from '../components/Rating';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { listProductDetails } from '../actions/productActions';\n\nconst ProductScreen = ({\n  match,\n  history\n}) => {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n  const dispatch = useDispatch();\n  const {\n    loading,\n    error,\n    product\n  } = useSelector(state => state.productDetails);\n  const {\n    error: errorProductReview,\n    success: successProductReview\n  } = useSelector(state => state.productReviewCreate);\n  const {\n    userInfo\n  } = useSelector(state => state.userLogin);\n  useEffect(() => {\n    dispatch(listProductDetails(match.params.id));\n  }, [match, dispatch]);\n\n  const addToCartHandler = () => {\n    history.push(`/cart/${match.params.id}?qty=${qty}`);\n  };\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Link, {\n    className: \"btn btn-light my-3\",\n    to: \"/\"\n  }, \"Go Back\"), loading ? /*#__PURE__*/React.createElement(Loader, null) : error ? /*#__PURE__*/React.createElement(Message, {\n    variant: \"danger\"\n  }, error) : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, {\n    md: 6\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: product === null || product === void 0 ? void 0 : product.image,\n    alt: product === null || product === void 0 ? void 0 : product.name,\n    fluid: true\n  })), /*#__PURE__*/React.createElement(Col, {\n    md: 3\n  }, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\"\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, null, /*#__PURE__*/React.createElement(\"h3\", null, product === null || product === void 0 ? void 0 : product.name)), /*#__PURE__*/React.createElement(ListGroup.Item, null, /*#__PURE__*/React.createElement(Rating, {\n    value: (product === null || product === void 0 ? void 0 : product.rating) || 0,\n    text: `${product === null || product === void 0 ? void 0 : product.numReviews} reviews`,\n    color: \"#5aa962\"\n  })), /*#__PURE__*/React.createElement(ListGroup.Item, null, \"Description: \", product === null || product === void 0 ? void 0 : product.description))), /*#__PURE__*/React.createElement(Col, {\n    md: 3\n  }, /*#__PURE__*/React.createElement(Card, null, /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\"\n  }, /*#__PURE__*/React.createElement(ListGroup.Item, null, /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, null, \"Price:\"), /*#__PURE__*/React.createElement(Col, null, /*#__PURE__*/React.createElement(\"strong\", null, \"$ \", product === null || product === void 0 ? void 0 : product.price)))), /*#__PURE__*/React.createElement(ListGroup.Item, null, /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, null, \"Status:\"), /*#__PURE__*/React.createElement(Col, null, product && product.countInStock > 0 ? 'In Stock' : 'Out Of Stock'))), product.countInStock > 0 && /*#__PURE__*/React.createElement(ListGroup.Item, null, /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, null, \"Qty\"), /*#__PURE__*/React.createElement(Col, null, /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"select\",\n    value: qty,\n    onChange: e => {\n      setQty(e.target.value);\n    }\n  }, [...Array(product.countInStock).keys()].map(x => /*#__PURE__*/React.createElement(\"option\", {\n    key: x + 1,\n    value: x + 1\n  }, x + 1)))))), /*#__PURE__*/React.createElement(ListGroup.Item, null, /*#__PURE__*/React.createElement(Button, {\n    onClick: addToCartHandler,\n    className: \"btn-block\",\n    type: \"button\",\n    disabled: (product === null || product === void 0 ? void 0 : product.countInStock) === 0\n  }, \"Add to Cart\")))))), /*#__PURE__*/React.createElement(Row, null, /*#__PURE__*/React.createElement(Col, {\n    md: 6\n  }, /*#__PURE__*/React.createElement(\"h2\", null, \"Reviews\"), !product.reviews.length && /*#__PURE__*/React.createElement(Message, null, \"No Reviews\"), /*#__PURE__*/React.createElement(ListGroup, {\n    variant: \"flush\"\n  }, product.reviews.map(review => /*#__PURE__*/React.createElement(ListGroup.Item, {\n    key: review._id\n  }, /*#__PURE__*/React.createElement(\"strong\", null, review.name), /*#__PURE__*/React.createElement(Rating, {\n    value: review.rating\n  }))))))));\n};\n\nexport default ProductScreen;","map":{"version":3,"sources":["/home/ad.rapidops.com/kishor.rathva/Worspace/hapi-mongo-ts/client/src/screens/ProductScreen.tsx"],"names":["React","useEffect","useState","Link","useDispatch","useSelector","Row","Col","Image","ListGroup","Card","Button","Form","Rating","Message","Loader","listProductDetails","ProductScreen","match","history","qty","setQty","rating","setRating","comment","setComment","dispatch","loading","error","product","state","productDetails","errorProductReview","success","successProductReview","productReviewCreate","userInfo","userLogin","params","id","addToCartHandler","push","image","name","numReviews","description","price","countInStock","e","target","value","Array","keys","map","x","reviews","length","review","_id"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, FunctionComponent } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { Row, Col, Image, ListGroup, Card, Button, Form } from 'react-bootstrap';\nimport Rating from '../components/Rating';\nimport Message from '../components/Message';\nimport Loader from '../components/Loader';\nimport { listProductDetails, createProductReview } from '../actions/productActions';\nimport { PRODUCT_CREATE_REVIEW_RESET } from '../constants/productConstants';\ninterface Props {\n  match: any;\n  history: any;\n}\n\nconst ProductScreen: FunctionComponent<Props> = ({ match, history }) => {\n  const [qty, setQty] = useState(1);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState('');\n\n  const dispatch = useDispatch();\n\n  const { loading, error, product } = useSelector((state: any) => state.productDetails);\n\n  const { error: errorProductReview, success: successProductReview } = useSelector(\n    (state: any) => state.productReviewCreate\n  );\n\n  const { userInfo } = useSelector((state: any) => state.userLogin);\n\n  useEffect(() => {\n    dispatch(listProductDetails(match.params.id));\n  }, [match, dispatch]);\n\n  const addToCartHandler = () => {\n    history.push(`/cart/${match.params.id}?qty=${qty}`);\n  };\n  return (\n    <>\n      <Link className=\"btn btn-light my-3\" to=\"/\">\n        Go Back\n      </Link>\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant=\"danger\">{error}</Message>\n      ) : (\n        <>\n          <Row>\n            <Col md={6}>\n              <Image src={product?.image} alt={product?.name} fluid />\n            </Col>\n            <Col md={3}>\n              <ListGroup variant=\"flush\">\n                <ListGroup.Item>\n                  <h3>{product?.name}</h3>\n                </ListGroup.Item>\n                <ListGroup.Item>\n                  <Rating value={product?.rating || 0} text={`${product?.numReviews} reviews`} color=\"#5aa962\" />\n                </ListGroup.Item>\n\n                <ListGroup.Item>Description: {product?.description}</ListGroup.Item>\n              </ListGroup>\n            </Col>\n            <Col md={3}>\n              <Card>\n                <ListGroup variant=\"flush\">\n                  <ListGroup.Item>\n                    <Row>\n                      <Col>Price:</Col>\n                      <Col>\n                        <strong>$ {product?.price}</strong>\n                      </Col>\n                    </Row>\n                  </ListGroup.Item>\n\n                  <ListGroup.Item>\n                    <Row>\n                      <Col>Status:</Col>\n                      <Col>{product && product.countInStock > 0 ? 'In Stock' : 'Out Of Stock'}</Col>\n                    </Row>\n                  </ListGroup.Item>\n\n                  {product.countInStock > 0 && (\n                    <ListGroup.Item>\n                      <Row>\n                        <Col>Qty</Col>\n                        <Col>\n                          <Form.Control\n                            as=\"select\"\n                            value={qty}\n                            onChange={(e: React.ChangeEvent<any>) => {\n                              setQty(e.target.value);\n                            }}\n                          >\n                            {[...Array(product.countInStock).keys()].map((x) => (\n                              <option key={x + 1} value={x + 1}>\n                                {x + 1}\n                              </option>\n                            ))}\n                          </Form.Control>\n                        </Col>\n                      </Row>\n                    </ListGroup.Item>\n                  )}\n                  <ListGroup.Item>\n                    <Button\n                      onClick={addToCartHandler}\n                      className=\"btn-block\"\n                      type=\"button\"\n                      disabled={product?.countInStock === 0}\n                    >\n                      Add to Cart\n                    </Button>\n                  </ListGroup.Item>\n                </ListGroup>\n              </Card>\n            </Col>\n          </Row>\n          <Row>\n            <Col md={6}>\n              <h2>Reviews</h2>\n              {!product.reviews.length && <Message>No Reviews</Message>}\n              <ListGroup variant=\"flush\">\n                {product.reviews.map((review: any) => (\n                  <ListGroup.Item key={review._id}>\n                    <strong>{review.name}</strong>\n                    <Rating value={review.rating} />\n                  </ListGroup.Item>\n                ))}\n              </ListGroup>\n            </Col>\n          </Row>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default ProductScreen;\n"]},"metadata":{},"sourceType":"module"}